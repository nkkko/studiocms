---
import { authEnvCheck } from 'studiocms:auth/utils/authEnvCheck';
import Config from 'virtual:studiocms/config';
import Auth0Button from './OAuthButtons/Auth0Button.astro';
import DiscordButton from './OAuthButtons/DiscordButton.astro';
import GitHubButton from './OAuthButtons/GitHubButton.astro';
import GoogleButton from './OAuthButtons/GoogleButton.astro';

const {
	dashboardConfig: {
		AuthConfig: { providers },
	},
} = Config;

const {
	DISCORD: { ENABLED: discordEnabled },
	GITHUB: { ENABLED: githubEnabled },
	GOOGLE: { ENABLED: googleEnabled },
	AUTH0: { ENABLED: auth0Enabled },
	SHOW_OAUTH,
} = await authEnvCheck(providers);
---
{ SHOW_OAUTH && ( 
    <>
    { githubEnabled && <GitHubButton /> }
    { discordEnabled && <DiscordButton /> }
    { googleEnabled && <GoogleButton /> }
    { auth0Enabled && <Auth0Button /> }
    </>
)}